query = f"""You will assume the the role of a scientific assistant. 
        Your task is to write an critcal evaluation on how does {common_element} 
        affect {observation} in MOF?. 
            Use SHAP values, Z-scores if needed.
            Format the output in the following format:
        ``Question: <question>
        Answer: <Answer>`` 
        References:
        1. <Reference 1>
        2. <Reference 2>
        ...
        ``
        """

query= f""""You will assume the the role of a scientific assistant. 
    Your task is to write an critcal evaluation on different features impact the {observation}.
    Suggest how this <observation> can be improved based on literature.
    Format the output in the following format:
    ``<Answer>`` 
    You can refer to the following references for further details:
    1. <Reference 1>
    2. <Reference 2>
    ...
    ``
    """ 
    summary = chain2.run(query)
    print(summary)
    with open(f'{save_dir}/self_query_summary.txt','w+') as f:
        f.write(summary)
        f.close()'''


        f"""You will assume the the role of a scientific assistant. Your task is to answer the provided question as best as you can, based on the provided solution draft.
        The solution draft follows the format "Thought, Action, Action Input, Observation", where the 'Thought' statements describe a reasoning sequence. 
        The rest of the text is information obtained to complement the reasoning sequence, and it is 100% accurate. The text should have an educative and assistant-like tone, be accurate, 
        follow the same reasoning sequence than the solution draft and explain how any conclusion is reached. Use SHAP values, Z-scores as evidence if needed. 
        Give references to the answer. If you don't know the answer, do not make up answers.

        Question: How does {feature} affect {observation} in MOF?. 

        Answer: <finaly answer>
        """

prompt_1 = f"""Please explain how each important features identified by 
    SHAP analysis affects the observation {observation}. You can follow the provided solution draft to answer: 

    1. List of important features are most impactful SHAP features are: {ft_list}.
    
    2. Find the relationship of the <features> with the <obsertvation>
    eg:
    ``The relationship of <feature 1> with the <observation> is ...
      The relationship of <feature 2> with the <observation> is ...
      The relationship of <feature 3> with the <observation> is ... ``
    
    3. Explain how the <feature> affect the <observation>
    eg:
    ``<feature 1> affect the <observation> by ...
      <feature 2> affect the <observation> by ...
      <feature 3> affect the <observation> by ... ``
    
    4. Explain how the <observation> be improved by changing the <features>
    eg:
    ``The <observation> will change postively/negatively when <feature 1> changes because...
      The <observation> will change postively/negatively when <feature 2> changes because...
      The <observation> will change postively/negatively when <feature 3> changes because...
    
    5. Assume the role of a scientific assistant. Summarize how the <observation> can be changed with respect to features are: {ft_list}.
        """